@startuml
'https://plantuml.com/sequence-diagram
autoactivate on
autonumber

actor "UnregisteredUser" as User
participant ":DisplayListedPropertiesView" as System
participant ":DisplayListedPropertiesController" as Ctrl
participant ":Application" as App
participant "service:DisplayListedPropertiesService" as Service
participant "factory:RepositoryFactory" as Factory
participant "repo:ListingRepository" as Repo
participant "listing:Listing" as Listing

activate User

User -> System: requests to display properties
System -> Ctrl: listProperties()
Ctrl -> App: getListedPropertiesService()
App -> Factory: getListingRepository()
Factory --> App: repo
App --> Service**: create(repo)
App --> Ctrl: service
Ctrl -> Service: getListedProperties(filters, criteria)
Service -> Repo: getListings(filters, criteria)
Repo --> Service: returns List<Listing>
Service --> Ctrl: returns List<Listing>
Ctrl --> System: returns List<Listing>
loop for each 'listing' in 'List<Listing>'
    System -> Listing: getProperty()
    Listing --> System: returns Property
    System --> User: displays property details
end loop
@enduml
